---
layout: null
---
[
  {% assign first = true %}

  {%- for post in site.posts -%}
    {%- unless first -%},{%- endunless -%}
    {
      "title"     : {{ post.title | jsonify }},
      "categories": {{ post.categories | jsonify }},
      "tags"      : {{ post.tags | jsonify }},
      "url"       : {{ site.baseurl | append: post.url | jsonify }},
      "date"      : {{ post.date | date: "%Y-%m-%d" | jsonify }},
      "content"   : {{ post.content | strip_html | strip_newlines | truncatewords: 50 | jsonify }}
    }
    {%- assign first = false -%}
  {%- endfor -%}

  {%- for collection in site.collections -%}
    {%- assign coll = collection[1] -%}
    {%- for doc in coll.docs -%}
      {%- unless first -%},{%- endunless -%}
      {
        "title"     : {{ doc.title | jsonify }},
        "categories": {{ doc.categories | default: doc.collection | jsonify }},
        "tags"      : {{ doc.tags | jsonify }},
        "url"       : {{ site.baseurl | append: doc.url | jsonify }},
        "date"      : {{ doc.date | date: "%Y-%m-%d" | jsonify }},
        "content"   : {{ doc.content | strip_html | strip_newlines | truncatewords: 50 | jsonify }}
      }
      {%- assign first = false -%}
    {%- endfor -%}
  {%- endfor -%}
]
